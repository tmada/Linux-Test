---
format_version: '11'
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git
project_type: other
workflows:
  10core_max:
    meta:
      bitrise.io:
        stack: osx-xcode-14.0.x
        machine_type_id: g2-m1-max.10core
    before_run:
    - primary
  4core_intel:
    meta:
      bitrise.io:
        stack: osx-xcode-14.0.x
        machine_type_id: g2.4core
    before_run:
    - primary
  4core_m1:
    meta:
      bitrise.io:
        stack: osx-xcode-14.0.x
        machine_type_id: g2-m1.4core
    before_run:
    - primary
  8core_intel:
    meta:
      bitrise.io:
        stack: osx-xcode-14.0.x
        machine_type_id: g2.8core
    before_run:
    - primary
  8core_m1:
    meta:
      bitrise.io:
        stack: osx-xcode-14.0.x
        machine_type_id: g2-m1.8core
    before_run:
    - primary
  primary:
    steps:
    - script@1:
        title: Host Info
        inputs:
        - content: |-
            #!/usr/bin/env bash
            # fail if any commands fails
            set -e
            # make pipelines' return status equal the last command to exit with a non-zero status, or zero if all commands exit successfully
            set -o pipefail

            # write your script here
            date
            hostname
            sw_vers
            sysctl -n machdep.cpu.brand_string
            sysctl hw.ncpu
            xcodebuild -version
            echo "=="
    - script@1:
        title: BenchLogic
        inputs:
        - content: bash linux_bench.sh
  12core_intel:
    meta:
      bitrise.io:
        stack: osx-xcode-14.0.x
        machine_type_id: g2.12core
    before_run:
    - primary
meta:
  bitrise.io:
    stack: osx-xcode-14.0.x
    machine_type_id: g2-m1-max.5core
